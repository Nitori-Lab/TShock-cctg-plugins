{
  "project": {
    "name": "cctgPlugin",
    "type": "TShock Plugin for Terraria",
    "author": "stardust",
    "framework": "net9.0",
    "description": "CCTG团队对战插件 - 包含房屋建造、世界绘制、边界检查、传送管理和物品限制功能"
  },
  "build_and_deploy": {
    "command": "dotnet build && cp bin/Debug/net9.0/cctgPlugin.dll ../../TShockLauncher/bin/Debug/net9.0/ServerPlugins/ && echo '插件已更新，请重启或 reload 服务器'",
    "working_directory": "/Users/lhy/Documents/TShock/ServerPlugins/cctgPlugin",
    "output_path": "../../TShockLauncher/bin/Debug/net9.0/ServerPlugins/",
    "note": "编辑完代码后必须在cctgPlugin文件夹下执行此命令来构建和部署插件"
  },
  "modules": {
    "CctgPlugin.cs": "主插件类 - 游戏流程控制、命令处理、事件监听",
    "HouseBuilder.cs": "房屋建造模块",
    "WorldPainter.cs": "世界绘制模块",
    "BoundaryChecker.cs": "边界检查模块（18分钟限制）",
    "TeleportManager.cs": "传送管理模块",
    "GameState.cs": "游戏状态模块",
    "RestrictItem.cs": "物品限制模块 - 检测并清除受限物品，以及禁止手榴弹的购买"
  },
  "commands": {
    "/paintworld": "手动触发世界绘制",
    "/buildhouses": "手动建造房屋",
    "/start": "开始游戏（建造房屋、绘制世界、分配队伍、重置玩家）",
    "/end": "结束游戏（清除怪物、清除房屋、重置状态）",
    "/debugbound": "调试边界检查状态",
    "/debugitem": "调试物品限制功能（显示背包所有物品及ID）",
    "/t": "计时器命令 - 第一次输入开始计时，再次输入停止计时，每30秒显示一次进度"
  },
  "shop_modification": {
    "demolitionist_shop": {
      "target_item": "空物品 (Item ID: 0)",
      "modification_method": "发送原始数据包给客户端",
      "timing_logic": "玩家与爆破商对话后2秒内每0.5秒执行一次修改",
      "packet_structure": "[14, 0, 104, slot, itemId_low, itemId_high, stack_low, stack_high, prefix, price_low, price_high, price_highest, price_lowest, 0]"
    }
  },
  "game_mechanics": {
    "team_assignment": "游戏开始时随机分配玩家到红队(1)或蓝队(3)",
    "boundary_restriction": "游戏开始后18分钟内禁止越过出生点",
    "house_teleport": "玩家改变队伍或重生后0.5秒传送到对应队伍房屋",
    "recall_teleport": "使用回城物品传送后会被重定向到队伍房屋",
    "mob_clearing": "游戏进行中每0.5秒清理房屋内的怪物"
  },
  "important_notes": {
    "permission": "ignoresse权限可以让玩家在游戏开始时不被重置背包和状态",
    "api_version": "[ApiVersion(2, 1)]",
    "reload_required": "修改代码后需要在服务器执行reload命令或完全重启服务器"
  },
  "dependencies": {
    "TShockAPI": "lib/TShockAPI.dll",
    "OTAPI": "lib/OTAPI.dll",
    "TerrariaServer": "lib/TerrariaServer.dll",
    "ModFramework": "lib/ModFramework.dll"
  },
  "recent_changes": {
    "2025-12-08": [
      "Blue team house modified to be mirror symmetrical to red team house",
      "Implemented /t timer command for personal timing functionality with 30-second intervals",
      "Added automatic Demolitionist shop modification using raw packet data (2-second duration)",
      "Fixed timer display format and total time bug",
      "Added BiomeDetector class for automatic biome detection based on dungeon position"
    ]
  },
  "last_updated": "2025-12-08",
  "status": "所有功能正常：镜像房屋、计时器(30s间隔)、商店修改(2s)、生物群系检测"
}